[include shell_command.cfg]
# [include moonraker_obico_macros.cfg]
[include mainsail.cfg]
[include K-ShakeTune/*.cfg]
[include Configs/*]
# [include M8P.cfg]
# [include EBB36.cfg]
# [include Macro.cfg]
# [include LED_Effects.cfg]
# [include Purge_Bucket.cfg]
[include KAMP/KAMP_Settings.cfg]


[mcu CB2]
serial: /tmp/klipper_host_mcu

[temperature_sensor CB2]
sensor_type: temperature_host

# [safe_z_home]
# home_xy_position: 137.5, 137.5
# #   Sets the x, y position used for z homing with beacon
# z_hop: 3
# #   Retracts the z axis before x, y homing to avoid dragging the nozzle.

[bed_mesh]
algorithm: bicubic
speed: 1000
mesh_min: 30, 30
mesh_max: 230, 230
probe_count: 15, 15

[z_tilt]
z_positions:
    246, 12
    125.5, 245
    10, 12
#3 points
points: 
    240, 20
    125.5, 230
    15, 20
speed: 250
horizontal_move_z: 15
retries: 5
retry_tolerance:0.015

# Enable object exclusion
[exclude_object]

# Enable arcs support
[gcode_arcs]
resolution: 0.1

[firmware_retraction]
retract_length: 1
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 120
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 120
#   The speed of unretraction, in mm/s. The default is 10 mm/s.

[delayed_gcode LED]
initial_duration: 1.
gcode:
  # SET_LED LED="hotend_rgb" RED=0.6667 GREEN=0.3922 BLUE=1 SYNC=0 TRANSMIT=1
  SET_LED LED="Led_Bar" RED=1 GREEN=1 BLUE=1 SYNC=0 TRANSMIT=1

[resonance_tester]
accel_chip: beacon
probe_points: 125.5, 125.5, 20

[gcode_macro update_git]
gcode:
    RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command: bash /home/biqu/printer_data/klipper-backup/script.sh
timeout: 120.0
verbose: True

[shaketune]
# result_folder: ~/printer_data/config/ShakeTune_results
#    The folder where the results will be stored. It will be created if it doesn't exist.
# number_of_results_to_keep: 3
#    The number of results to keep in the result_folder. The oldest results will
#    be automatically deleted after each runs.
# keep_raw_csv: False
#    If True, the raw CSV files will be kept in the result_folder alongside the
#    PNG graphs. If False, they will be deleted and only the graphs will be kept.
# show_macros_in_webui: True
#    Mainsail and Fluidd doesn't create buttons for "system" macros that are not in the
#    printer.cfg file. If you want to see the macros in the webui, set this to True.
# timeout: 300
#    The maximum time in seconds to let Shake&Tune process the CSV files and generate the graphs.

[auto_speed]
#axis: diag_x, diag_y  ; One or multiple of `x`, `y`, `diag_x`, `diag_y`, `z`

#margin: 20            ; How far away from your axes to perform movements

#settling_home: 1      ; Perform settling home before starting Auto Speed
max_missed: 5          ; Maximum full steps that can be missed
#endstop_samples: 3    ; How many endstop samples to take for endstop variance

#accel_min: 1000.0     ; Minimum acceleration test may try
#accel_max: 50000.0    ; Maximum acceleration test may try
#accel_accu: 0.05      ; Keep binary searching until the result is within this percentage

#velocity_min: 50.0    ; Minimum velocity test may try
#velocity_max: 5000.0  ; Maximum velocity test may try
#velocity_accu: 0.05   ; Keep binary searching until the result is within this percentage

#derate: 0.8           ; Derate discovered results by this amount

#validate_margin: Unset      ; Margin for VALIDATE, Defaults to margin
#validate_inner_margin: 20.0 ; Margin for VALIDATE inner pattern
validate_iterations: 50     ; Perform VALIDATE pattern this many times

#results_dir: ~/printer_data/config ; Destination directory for graphs

[input_shaper]
shaper_freq_x: 74.2 # center frequency for the X axis filter
shaper_type_x: mzv # filter type for the X axis
shaper_freq_y: 51.0 # center frequency for the Y axis filter
shaper_type_y: mzv # filter type for the Y axis
damping_ratio_x: 0.041 # damping ratio for the X axis
damping_ratio_y: 0.047 # damping ratio for the Y axis

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.088610, 0.087891, 0.078553, 0.066964, 0.060007, 0.049445, 0.035994, 0.022712, 0.024126, 0.035616, 0.039564, 0.042945, 0.055312, 0.076398, 0.091858
#*# 	  0.088095, 0.086953, 0.079018, 0.068608, 0.059335, 0.052368, 0.037832, 0.024684, 0.026900, 0.035708, 0.042391, 0.045451, 0.058280, 0.082073, 0.095773
#*# 	  0.085167, 0.087165, 0.076912, 0.067063, 0.060735, 0.050665, 0.037312, 0.028017, 0.031189, 0.042387, 0.049513, 0.053424, 0.065928, 0.088793, 0.102943
#*# 	  0.081187, 0.082174, 0.072055, 0.062573, 0.055615, 0.049003, 0.038212, 0.027787, 0.032439, 0.044472, 0.051046, 0.054191, 0.064644, 0.088320, 0.102915
#*# 	  0.076473, 0.076923, 0.065996, 0.052502, 0.048674, 0.045792, 0.034726, 0.026566, 0.030874, 0.042221, 0.050307, 0.053058, 0.063892, 0.087795, 0.101650
#*# 	  0.074455, 0.074744, 0.060068, 0.046107, 0.043628, 0.041002, 0.032364, 0.024610, 0.028621, 0.039256, 0.047540, 0.051060, 0.062514, 0.085502, 0.099366
#*# 	  0.072752, 0.071687, 0.056072, 0.042548, 0.039768, 0.038815, 0.032952, 0.024382, 0.028807, 0.039442, 0.047502, 0.053623, 0.065026, 0.086331, 0.099530
#*# 	  0.071591, 0.070791, 0.056242, 0.040897, 0.038483, 0.039892, 0.032402, 0.024474, 0.028272, 0.039555, 0.051478, 0.055452, 0.067864, 0.089840, 0.103581
#*# 	  0.067815, 0.067153, 0.051802, 0.039689, 0.038338, 0.038259, 0.033459, 0.026249, 0.030947, 0.043324, 0.052920, 0.059142, 0.071274, 0.091949, 0.106469
#*# 	  0.064109, 0.062023, 0.049872, 0.037118, 0.036085, 0.038033, 0.032975, 0.025408, 0.029204, 0.041480, 0.052954, 0.058589, 0.067722, 0.090112, 0.104785
#*# 	  0.053805, 0.055209, 0.041801, 0.030394, 0.029456, 0.030236, 0.026294, 0.019677, 0.023235, 0.036918, 0.047782, 0.051376, 0.063833, 0.083784, 0.092982
#*# 	  0.041555, 0.042428, 0.031661, 0.019818, 0.016131, 0.017780, 0.015154, 0.007886, 0.014187, 0.028537, 0.036893, 0.040672, 0.051309, 0.071586, 0.087026
#*# 	  0.024878, 0.025130, 0.015696, 0.004292, 0.000998, 0.003722, 0.001102, -0.002825, 0.003182, 0.016295, 0.026150, 0.029254, 0.039480, 0.060846, 0.077035
#*# 	  0.009730, 0.010885, 0.000877, -0.011512, -0.010863, -0.010883, -0.012987, -0.017402, -0.012402, 0.002892, 0.011897, 0.015634, 0.030163, 0.051732, 0.065696
#*# 	  -0.013045, -0.012494, -0.020870, -0.032595, -0.032359, -0.028858, -0.031872, -0.036497, -0.031249, -0.016376, -0.008461, -0.003884, 0.011506, 0.038511, 0.046199
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 230.0
#*# min_y = 30.0
#*# max_y = 230.0
#*#
#*# [probe]
#*# z_offset = 7.539
#*#
#*# [heater_bed]
#*# pid_target = 50.00
#*# pid_tolerance = 0.0200
#*# control = pid
#*# pid_kp = 42.870
#*# pid_ki = 1.415
#*# pid_kd = 324.742
#*#
#*# [extruder]
#*# pid_target = 200.00
#*# pid_tolerance = 0.0100
#*# control = pid
#*# pid_kp = 19.625
#*# pid_ki = 1.322
#*# pid_kd = 72.856
#*#
#*# [bed_mesh 100]
#*# version = 1
#*# points =
#*# 	-0.078853, -0.050728, -0.065728, -0.056978, -0.040728
#*# 	-0.038228, 0.001147, -0.026978, 0.000522, -0.015728
#*# 	-0.006353, 0.006147, -0.001353, 0.017397, 0.023022
#*# 	-0.019478, 0.001772, -0.002603, -0.001353, 0.010522
#*# 	-0.078228, -0.063853, -0.065728, -0.063853, -0.030103
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 240.0
#*# min_y = 40.0
#*# max_y = 240.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3921699837136825,
#*# 	  1.7267044677049483,
#*# 	  0.8083288771590491,
#*# 	  0.4278471582308193,
#*# 	  0.3336941252238224,
#*# 	  0.2279972743097555,
#*# 	  -0.18066564700907697,
#*# 	  -0.17761274256495443,
#*# 	  0.24705429699176518,
#*# 	  0.1964091074644551
#*# model_domain = 1.7723144193201372e-07,1.9254081004687208e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 27.453848
#*# model_offset = 0.00000
