[include shell_command.cfg]
 # [include gab-3d-utilities.cfg]
# [include shell_command.cfg]
# [include moonraker_obico_macros.cfg]
[include mainsail.cfg]
[include M8P.cfg]
[include EBB36.cfg]
[include Macro.cfg]
# [include klicky-probe.cfg]
[include KAMP_Settings.cfg]
[include K-ShakeTune/*.cfg]
# [include Resonance_Tap_Test.cfg]
# [include OrbiterSensor.cfg]
[include LED_Effects.cfg]
[include Purge_Bucket.cfg]
[include shell_command.cfg]

[mcu CB2]
serial: /tmp/klipper_host_mcu

[temperature_sensor CB2]
sensor_type: temperature_host

# [safe_z_home]
# home_xy_position: 137.5, 137.5
# #   Sets the x, y position used for z homing with beacon
# z_hop: 3
# #   Retracts the z axis before x, y homing to avoid dragging the nozzle.

[bed_mesh]
algorithm: bicubic
speed: 1000
mesh_min: 30, 30
mesh_max: 230, 230
probe_count: 15, 15

[z_tilt]
z_positions:
    246, 12
    125.5, 245
    10, 12
#3 points
points: 
    240, 20
    125.5, 230
    15, 20
speed: 250
horizontal_move_z: 15
retries: 5
retry_tolerance:0.015

# Enable object exclusion
[exclude_object]

# Enable arcs support
[gcode_arcs]
resolution: 0.1

[firmware_retraction]
retract_length: 1
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 120
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 120
#   The speed of unretraction, in mm/s. The default is 10 mm/s.

[delayed_gcode LED]
initial_duration: 1.
gcode:
  # SET_LED LED="hotend_rgb" RED=0.6667 GREEN=0.3922 BLUE=1 SYNC=0 TRANSMIT=1
  SET_LED LED="Led_Bar" RED=1 GREEN=1 BLUE=1 SYNC=0 TRANSMIT=1

[resonance_tester]
accel_chip: beacon
probe_points: 125.5, 125.5, 20

[gcode_macro update_git]
gcode:
    RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command: bash /home/biqu/printer_data/klipper-backup/script.sh
timeout: 120.0
verbose: True

[shaketune]
# result_folder: ~/printer_data/config/ShakeTune_results
#    The folder where the results will be stored. It will be created if it doesn't exist.
# number_of_results_to_keep: 3
#    The number of results to keep in the result_folder. The oldest results will
#    be automatically deleted after each runs.
# keep_raw_csv: False
#    If True, the raw CSV files will be kept in the result_folder alongside the
#    PNG graphs. If False, they will be deleted and only the graphs will be kept.
# show_macros_in_webui: True
#    Mainsail and Fluidd doesn't create buttons for "system" macros that are not in the
#    printer.cfg file. If you want to see the macros in the webui, set this to True.
# timeout: 300
#    The maximum time in seconds to let Shake&Tune process the CSV files and generate the graphs.

[auto_speed]
#axis: diag_x, diag_y  ; One or multiple of `x`, `y`, `diag_x`, `diag_y`, `z`

#margin: 20            ; How far away from your axes to perform movements

#settling_home: 1      ; Perform settling home before starting Auto Speed
max_missed: 5          ; Maximum full steps that can be missed
#endstop_samples: 3    ; How many endstop samples to take for endstop variance

#accel_min: 1000.0     ; Minimum acceleration test may try
#accel_max: 50000.0    ; Maximum acceleration test may try
#accel_accu: 0.05      ; Keep binary searching until the result is within this percentage

#velocity_min: 50.0    ; Minimum velocity test may try
#velocity_max: 5000.0  ; Maximum velocity test may try
#velocity_accu: 0.05   ; Keep binary searching until the result is within this percentage

#derate: 0.8           ; Derate discovered results by this amount

#validate_margin: Unset      ; Margin for VALIDATE, Defaults to margin
#validate_inner_margin: 20.0 ; Margin for VALIDATE inner pattern
validate_iterations: 50     ; Perform VALIDATE pattern this many times

#results_dir: ~/printer_data/config ; Destination directory for graphs

[input_shaper]
shaper_freq_x: 74.2 # center frequency for the X axis filter
shaper_type_x: mzv # filter type for the X axis
shaper_freq_y: 51.0 # center frequency for the Y axis filter
shaper_type_y: mzv # filter type for the Y axis
damping_ratio_x: 0.041 # damping ratio for the X axis
damping_ratio_y: 0.047 # damping ratio for the Y axis

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.131001, 0.124462, 0.113499, 0.098036, 0.086789, 0.075068, 0.058279, 0.041813, 0.041120, 0.050482, 0.052123, 0.054186, 0.066634, 0.087244, 0.097379
#*# 	  0.126208, 0.123552, 0.112887, 0.095887, 0.084577, 0.075069, 0.056749, 0.041437, 0.041449, 0.047843, 0.052072, 0.054520, 0.065738, 0.085969, 0.096249
#*# 	  0.122485, 0.121045, 0.109635, 0.095015, 0.084460, 0.071253, 0.054989, 0.042608, 0.041941, 0.051967, 0.055953, 0.057750, 0.070647, 0.091892, 0.100150
#*# 	  0.119269, 0.117175, 0.103822, 0.088326, 0.077369, 0.068693, 0.056217, 0.039939, 0.042514, 0.051163, 0.053994, 0.056229, 0.066345, 0.085387, 0.096578
#*# 	  0.113631, 0.111258, 0.097442, 0.078630, 0.070802, 0.064385, 0.049949, 0.038369, 0.041867, 0.047101, 0.052375, 0.052626, 0.062069, 0.085155, 0.092804
#*# 	  0.113296, 0.111048, 0.092324, 0.072862, 0.065265, 0.058724, 0.048864, 0.035145, 0.035326, 0.044293, 0.047537, 0.048697, 0.059645, 0.077414, 0.087182
#*# 	  0.112540, 0.105302, 0.089314, 0.069985, 0.061050, 0.057445, 0.046146, 0.033799, 0.037386, 0.042337, 0.046567, 0.050620, 0.060404, 0.079133, 0.086335
#*# 	  0.112246, 0.109116, 0.089870, 0.067653, 0.061711, 0.058478, 0.047756, 0.034695, 0.034602, 0.043245, 0.049850, 0.052784, 0.062084, 0.079293, 0.087879
#*# 	  0.111119, 0.105896, 0.086996, 0.068633, 0.062062, 0.057271, 0.047963, 0.037205, 0.036887, 0.046525, 0.052228, 0.054544, 0.065674, 0.082447, 0.090041
#*# 	  0.109494, 0.104411, 0.086958, 0.067408, 0.060415, 0.059160, 0.049980, 0.036496, 0.036279, 0.045213, 0.051606, 0.056106, 0.062808, 0.078630, 0.087634
#*# 	  0.102110, 0.098432, 0.081809, 0.062053, 0.056101, 0.053092, 0.043436, 0.032909, 0.031882, 0.040811, 0.047597, 0.047474, 0.057567, 0.073413, 0.081168
#*# 	  0.094509, 0.091899, 0.073267, 0.054532, 0.046142, 0.042279, 0.036903, 0.022777, 0.024295, 0.034729, 0.037928, 0.040214, 0.047100, 0.061657, 0.071228
#*# 	  0.080790, 0.075525, 0.060751, 0.041689, 0.033008, 0.031310, 0.023068, 0.013129, 0.014830, 0.023612, 0.028903, 0.027632, 0.035745, 0.052222, 0.063461
#*# 	  0.069571, 0.067446, 0.049142, 0.029726, 0.025175, 0.020172, 0.013822, 0.002360, 0.002441, 0.013006, 0.016435, 0.018227, 0.027578, 0.043496, 0.053062
#*# 	  0.053352, 0.048005, 0.030784, 0.012524, 0.007758, 0.004164, -0.003445, -0.014017, -0.015550, -0.004665, -0.001424, 0.000814, 0.013750, 0.028533, 0.040972
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 230.0
#*# min_y = 30.0
#*# max_y = 230.0
#*#
#*# [probe]
#*# z_offset = 7.539
#*#
#*# [heater_bed]
#*# pid_target = 50.00
#*# pid_tolerance = 0.0200
#*# control = pid
#*# pid_kp = 42.870
#*# pid_ki = 1.415
#*# pid_kd = 324.742
#*#
#*# [extruder]
#*# pid_target = 200.00
#*# pid_tolerance = 0.0100
#*# control = pid
#*# pid_kp = 19.625
#*# pid_ki = 1.322
#*# pid_kd = 72.856
#*#
#*# [bed_mesh 100]
#*# version = 1
#*# points =
#*# 	-0.078853, -0.050728, -0.065728, -0.056978, -0.040728
#*# 	-0.038228, 0.001147, -0.026978, 0.000522, -0.015728
#*# 	-0.006353, 0.006147, -0.001353, 0.017397, 0.023022
#*# 	-0.019478, 0.001772, -0.002603, -0.001353, 0.010522
#*# 	-0.078228, -0.063853, -0.065728, -0.063853, -0.030103
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 240.0
#*# min_y = 40.0
#*# max_y = 240.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3995608654318001,
#*# 	  1.7339601401844895,
#*# 	  0.8062370938140914,
#*# 	  0.4197954540564197,
#*# 	  0.3196344816399547,
#*# 	  0.2251730962624642,
#*# 	  -0.15376070223977698,
#*# 	  -0.16549174836353034,
#*# 	  0.22856168562196158,
#*# 	  0.1874219080802277
#*# model_domain = 1.775404614133943e-07,1.9256935868284944e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 24.434285
#*# model_offset = 0.00000
