[include shell_command.cfg]
[include moonraker_obico_macros.cfg]
[include mainsail.cfg]
[include K-ShakeTune/*.cfg]
[include Configs/*]
# [include M8P.cfg]
# [include EBB36.cfg]
# [include Macro.cfg]
# [include LED_Effects.cfg]
# [include Purge_Bucket.cfg]
[include KAMP/KAMP_Settings.cfg]


[mcu CB2]
serial: /tmp/klipper_host_mcu

[temperature_sensor CB2]
sensor_type: temperature_host

# [safe_z_home]
# home_xy_position: 137.5, 137.5
# #   Sets the x, y position used for z homing with beacon
# z_hop: 3
# #   Retracts the z axis before x, y homing to avoid dragging the nozzle.

[bed_mesh]
algorithm: bicubic
speed: 1000
mesh_min: 30, 30
mesh_max: 230, 230
probe_count: 15, 15

[z_tilt]
z_positions:
    246, 12
    125.5, 245
    10, 12
#3 points
points: 
    240, 20
    125.5, 230
    15, 20
speed: 250
horizontal_move_z: 15
retries: 5
retry_tolerance:0.015

# Enable object exclusion
[exclude_object]

# Enable arcs support
[gcode_arcs]
resolution: 0.1

[firmware_retraction]
retract_length: 1
#   The length of filament (in mm) to retract when G10 is activated,
#   and to unretract when G11 is activated (but see
#   unretract_extra_length below). The default is 0 mm.
retract_speed: 120
#   The speed of retraction, in mm/s. The default is 20 mm/s.
unretract_extra_length: 0
#   The length (in mm) of *additional* filament to add when
#   unretracting.
unretract_speed: 120
#   The speed of unretraction, in mm/s. The default is 10 mm/s.

[delayed_gcode LED]
initial_duration: 1.
gcode:
  # SET_LED LED="hotend_rgb" RED=0.6667 GREEN=0.3922 BLUE=1 SYNC=0 TRANSMIT=1
  SET_LED LED="Led_Bar" RED=1 GREEN=1 BLUE=1 SYNC=0 TRANSMIT=1

[resonance_tester]
accel_chip: beacon
probe_points: 125.5, 125.5, 20

[gcode_macro update_git]
gcode:
    RUN_SHELL_COMMAND CMD=update_git_script

[gcode_shell_command update_git_script]
command: bash /home/biqu/printer_data/klipper-backup/script.sh
timeout: 120.0
verbose: True

[shaketune]
# result_folder: ~/printer_data/config/ShakeTune_results
#    The folder where the results will be stored. It will be created if it doesn't exist.
# number_of_results_to_keep: 3
#    The number of results to keep in the result_folder. The oldest results will
#    be automatically deleted after each runs.
# keep_raw_csv: False
#    If True, the raw CSV files will be kept in the result_folder alongside the
#    PNG graphs. If False, they will be deleted and only the graphs will be kept.
# show_macros_in_webui: True
#    Mainsail and Fluidd doesn't create buttons for "system" macros that are not in the
#    printer.cfg file. If you want to see the macros in the webui, set this to True.
# timeout: 300
#    The maximum time in seconds to let Shake&Tune process the CSV files and generate the graphs.

[auto_speed]
#axis: diag_x, diag_y  ; One or multiple of `x`, `y`, `diag_x`, `diag_y`, `z`

#margin: 20            ; How far away from your axes to perform movements

#settling_home: 1      ; Perform settling home before starting Auto Speed
max_missed: 5          ; Maximum full steps that can be missed
#endstop_samples: 3    ; How many endstop samples to take for endstop variance

#accel_min: 1000.0     ; Minimum acceleration test may try
#accel_max: 50000.0    ; Maximum acceleration test may try
#accel_accu: 0.05      ; Keep binary searching until the result is within this percentage

#velocity_min: 50.0    ; Minimum velocity test may try
#velocity_max: 5000.0  ; Maximum velocity test may try
#velocity_accu: 0.05   ; Keep binary searching until the result is within this percentage

#derate: 0.8           ; Derate discovered results by this amount

#validate_margin: Unset      ; Margin for VALIDATE, Defaults to margin
#validate_inner_margin: 20.0 ; Margin for VALIDATE inner pattern
validate_iterations: 50     ; Perform VALIDATE pattern this many times

#results_dir: ~/printer_data/config ; Destination directory for graphs

[input_shaper]
shaper_freq_x: 67.6 # center frequency for the X axis filter
shaper_type_x: mzv # filter type for the X axis
shaper_freq_y: 51.4 # center frequency for the Y axis filter
shaper_type_y: mzv # filter type for the Y axis
damping_ratio_x: 0.046 # damping ratio for the X axis
damping_ratio_y: 0.045 # damping ratio for the Y axis

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.086987, 0.083997, 0.071121, 0.060625, 0.047402, 0.031609, 0.019495, 0.006234, 0.010555, 0.019902, 0.017414, 0.025645, 0.036222, 0.059455, 0.082683
#*# 	0.087159, 0.085996, 0.071427, 0.059432, 0.048077, 0.037166, 0.023694, 0.008650, 0.009948, 0.015479, 0.024111, 0.031754, 0.039746, 0.065160, 0.078615
#*# 	0.085647, 0.083131, 0.069688, 0.062135, 0.045519, 0.037785, 0.022515, 0.011150, 0.016892, 0.020655, 0.030719, 0.034489, 0.047149, 0.074629, 0.077640
#*# 	0.078681, 0.082122, 0.064579, 0.052266, 0.043840, 0.034247, 0.022576, 0.013857, 0.015395, 0.026450, 0.029428, 0.035661, 0.050496, 0.070421, 0.085406
#*# 	0.079344, 0.076730, 0.064780, 0.041921, 0.036464, 0.033734, 0.019779, 0.014531, 0.013726, 0.021486, 0.031614, 0.034562, 0.044927, 0.069327, 0.075900
#*# 	0.078000, 0.072074, 0.056524, 0.040581, 0.035335, 0.028665, 0.016909, 0.011538, 0.014564, 0.022615, 0.030270, 0.030094, 0.047563, 0.068686, 0.081296
#*# 	0.079213, 0.072855, 0.053891, 0.035797, 0.032002, 0.029912, 0.021833, 0.010427, 0.012724, 0.023191, 0.030349, 0.040767, 0.046768, 0.065559, 0.082752
#*# 	0.078134, 0.071072, 0.054817, 0.040267, 0.033944, 0.031918, 0.018717, 0.010560, 0.018295, 0.026168, 0.035636, 0.040114, 0.048650, 0.074307, 0.086072
#*# 	0.076679, 0.073115, 0.053590, 0.038731, 0.034851, 0.032682, 0.024959, 0.015216, 0.017762, 0.030684, 0.041134, 0.046940, 0.056555, 0.076734, 0.091836
#*# 	0.077083, 0.070830, 0.053586, 0.039577, 0.036225, 0.035297, 0.027412, 0.015155, 0.020051, 0.033088, 0.040617, 0.046549, 0.051898, 0.075075, 0.089734
#*# 	0.067875, 0.067355, 0.050539, 0.034690, 0.032858, 0.030228, 0.023310, 0.014989, 0.016999, 0.029110, 0.039733, 0.041335, 0.052814, 0.072092, 0.086464
#*# 	0.065018, 0.058133, 0.043077, 0.025743, 0.022265, 0.021903, 0.015750, 0.006612, 0.008924, 0.023858, 0.032957, 0.033506, 0.043793, 0.062734, 0.078003
#*# 	0.047884, 0.044289, 0.030324, 0.016032, 0.010155, 0.010670, 0.005570, -0.001834, 0.003661, 0.014961, 0.022275, 0.025835, 0.035202, 0.055064, 0.075956
#*# 	0.038444, 0.033852, 0.020101, 0.004256, 0.002120, 0.000976, -0.003241, -0.011429, -0.008843, 0.002885, 0.013168, 0.016001, 0.028560, 0.049001, 0.064892
#*# 	0.020055, 0.015603, 0.001636, -0.013063, -0.014699, -0.014744, -0.019747, -0.026566, -0.023928, -0.010576, -0.003516, -0.000469, 0.013990, 0.044336, 0.049873
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 230.0
#*# min_y = 30.0
#*# max_y = 230.0
#*#
#*# [probe]
#*# z_offset = 7.539
#*#
#*# [heater_bed]
#*# pid_target = 50.00
#*# pid_tolerance = 0.0200
#*# control = pid
#*# pid_kp = 42.870
#*# pid_ki = 1.415
#*# pid_kd = 324.742
#*#
#*# [extruder]
#*# pid_target = 200.00
#*# pid_tolerance = 0.0100
#*# control = pid
#*# pid_kp = 19.625
#*# pid_ki = 1.322
#*# pid_kd = 72.856
#*#
#*# [bed_mesh 100]
#*# version = 1
#*# points =
#*# 	-0.078853, -0.050728, -0.065728, -0.056978, -0.040728
#*# 	-0.038228, 0.001147, -0.026978, 0.000522, -0.015728
#*# 	-0.006353, 0.006147, -0.001353, 0.017397, 0.023022
#*# 	-0.019478, 0.001772, -0.002603, -0.001353, 0.010522
#*# 	-0.078228, -0.063853, -0.065728, -0.063853, -0.030103
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 240.0
#*# min_y = 40.0
#*# max_y = 240.0
#*#
#*# [beacon model default]
#*# model_coef = 1.3872409612553271,
#*# 	  1.7185174203619018,
#*# 	  0.8028179756959233,
#*# 	  0.4340051022706569,
#*# 	  0.35636593029823843,
#*# 	  0.24118032626634414,
#*# 	  -0.2025961697781502,
#*# 	  -0.20294048474982226,
#*# 	  0.2563183597078269,
#*# 	  0.21049323580601703
#*# model_domain = 1.7713437700139718e-07,1.9254050683239393e-07
#*# model_range = 0.200000,5.000000
#*# model_temp = 33.972246
#*# model_offset = 0.00000
